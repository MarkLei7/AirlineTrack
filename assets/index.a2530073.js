const u=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function r(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(e){if(e.ep)return;e.ep=!0;const i=r(e);fetch(e.href,i)}};u();const s=new Cesium.Viewer("cesiumContainer");Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzYTk5NDZhNy1hZGRiLTQyNzUtYjRmZC0zZDM4ZDc0ZDRhZGQiLCJpZCI6NDYwNDcsImlhdCI6MTYxNTg3NTI1Mn0.QPYRQfxoUqWlLyFOYTbZKryd8BuVQCosSZD4tVlVpQ8";s.scene.primitives.add(Cesium.createOsmBuildings());fetch("data/MU5735-Flightradar24-Granular-Data.csv").then(t=>t.text()).then(t=>t.split(`\r
`)).then(t=>t.map(n=>n.split(","))).then(t=>{t.shift(),console.log(t);const n=Cesium.JulianDate.fromIso8601(t[0][0].replace(" ","T").slice(0,20)),r=Cesium.JulianDate.addSeconds(n,60,new Cesium.JulianDate),l=Cesium.JulianDate.fromIso8601(t[t.length-1][0].replace(" ","T").slice(0,20)),e=new Cesium.SampledPositionProperty;for(let i=0;i<t.length;i++){const o=t[i],a=Cesium.JulianDate.fromIso8601(o[0].replace(" ","T").slice(0,20)),c=Cesium.Cartesian3.fromDegrees(Number(o[4]),Number(o[3]),Number(o[6]));e.addSample(a,c),s.entities.add({description:`Location: (${o[4]}, ${o[3]}, ${o[6]})`,position:c,point:{pixelSize:10,color:Cesium.Color.RED}})}s.clock.startTime=r.clone(),s.clock.stopTime=l.clone(),s.clock.currentTime=r.clone(),s.timeline.zoomTo(r,l),m(t),d(n,l,e)});const m=(t=[])=>{console.log(t[0][0].replace(" ","T").slice(0,20))};s.clock.multiplier=1.3;s.clock.shouldAnimate=!0;async function d(t,n,r){const l=await Cesium.IonResource.fromAssetId(895338),e=s.entities.add({availability:new Cesium.TimeIntervalCollection([new Cesium.TimeInterval({start:t,stop:n})]),position:r,model:{uri:l},orientation:new Cesium.VelocityOrientationProperty(r),path:new Cesium.PathGraphics({width:3})});s.trackedEntity=e}
