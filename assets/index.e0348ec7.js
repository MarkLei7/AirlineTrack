const m=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function l(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(e){if(e.ep)return;e.ep=!0;const i=l(e);fetch(e.href,i)}};m();const o=new Cesium.Viewer("cesiumContainer");Cesium.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIzYTk5NDZhNy1hZGRiLTQyNzUtYjRmZC0zZDM4ZDc0ZDRhZGQiLCJpZCI6NDYwNDcsImlhdCI6MTYxNTg3NTI1Mn0.QPYRQfxoUqWlLyFOYTbZKryd8BuVQCosSZD4tVlVpQ8";o.scene.primitives.add(Cesium.createOsmBuildings());fetch("data/MU5735-Flightradar24-Granular-Data.csv").then(s=>s.text()).then(s=>{const t=s.split(`\r
`).map(n=>n.split(","));t.shift(),console.log(t);const l=Cesium.JulianDate.fromIso8601(t[0][0].replace(" ","T").slice(0,20)),r=Cesium.JulianDate.addSeconds(l,60,new Cesium.JulianDate),e=Cesium.JulianDate.fromIso8601(t[t.length-1][0].replace(" ","T").slice(0,20)),i=new Cesium.SampledPositionProperty;for(let n=0;n<t.length;n++){const c=t[n],u=Cesium.JulianDate.fromIso8601(c[0].replace(" ","T").slice(0,20)),a=Cesium.Cartesian3.fromDegrees(Number(c[4]),Number(c[3]),Number(c[6]));i.addSample(u,a),o.entities.add({description:`Location: (${c[4]}, ${c[3]}, ${c[6]})`,position:a,point:{pixelSize:10,color:Cesium.Color.RED}})}o.clock.startTime=r.clone(),o.clock.stopTime=e.clone(),o.clock.currentTime=r.clone(),o.timeline.zoomTo(r,e),d(t),p(l,e,i)});const d=(s=[])=>{console.log(s[0][0].replace(" ","T").slice(0,20))};o.clock.multiplier=1.3;o.clock.shouldAnimate=!0;async function p(s,t,l){const r=await Cesium.IonResource.fromAssetId(895338),e=o.entities.add({availability:new Cesium.TimeIntervalCollection([new Cesium.TimeInterval({start:s,stop:t})]),position:l,model:{uri:r},orientation:new Cesium.VelocityOrientationProperty(l),path:new Cesium.PathGraphics({width:3})});o.trackedEntity=e}
